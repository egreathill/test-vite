import{s as B,$ as P}from"./navigation.min.3fe0f0f4.js";function R({swiper:a,extendParams:z,on:p,emit:$}){z({virtual:{enabled:!1,slides:[],cache:!0,renderSlide:null,renderExternal:null,renderExternalUpdate:!0,addSlidesBefore:0,addSlidesAfter:0}});let b;a.virtual={cache:{},from:void 0,to:void 0,slides:[],offset:0,slidesGrid:[]};function M(e,t){const r=a.params.virtual;if(r.cache&&a.virtual.cache[t])return a.virtual.cache[t];const i=r.renderSlide?P(r.renderSlide.call(a,e,t)):P(`<div class="${a.params.slideClass}" data-swiper-slide-index="${t}">${e}</div>`);return i.attr("data-swiper-slide-index")||i.attr("data-swiper-slide-index",t),r.cache&&(a.virtual.cache[t]=i),i}function n(e){const{slidesPerView:t,slidesPerGroup:r,centeredSlides:i}=a.params,{addSlidesBefore:d,addSlidesAfter:v}=a.params.virtual,{from:o,to:u,slides:c,slidesGrid:I,offset:V}=a.virtual;a.params.cssMode||a.updateActiveIndex();const A=a.activeIndex||0;let m;a.rtlTranslate?m="right":m=a.isHorizontal()?"left":"top";let g,E;i?(g=Math.floor(t/2)+r+v,E=Math.floor(t/2)+r+d):(g=t+(r-1)+v,E=r+d);const s=Math.max((A||0)-E,0),f=Math.min((A||0)+g,c.length-1),h=(a.slidesGrid[s]||0)-(a.slidesGrid[0]||0);Object.assign(a.virtual,{from:s,to:f,offset:h,slidesGrid:a.slidesGrid});function T(){a.updateSlides(),a.updateProgress(),a.updateSlidesClasses(),a.lazy&&a.params.lazy.enabled&&a.lazy.load(),$("virtualUpdate")}if(o===s&&u===f&&!e){a.slidesGrid!==I&&h!==V&&a.slides.css(m,`${h}px`),a.updateProgress(),$("virtualUpdate");return}if(a.params.virtual.renderExternal){a.params.virtual.renderExternal.call(a,{offset:h,from:s,to:f,slides:function(){const S=[];for(let y=s;y<=f;y+=1)S.push(c[y]);return S}()}),a.params.virtual.renderExternalUpdate?T():$("virtualUpdate");return}const G=[],x=[];if(e)a.$wrapperEl.find(`.${a.params.slideClass}`).remove();else for(let l=o;l<=u;l+=1)(l<s||l>f)&&a.$wrapperEl.find(`.${a.params.slideClass}[data-swiper-slide-index="${l}"]`).remove();for(let l=0;l<c.length;l+=1)l>=s&&l<=f&&(typeof u>"u"||e?x.push(l):(l>u&&x.push(l),l<o&&G.push(l)));x.forEach(l=>{a.$wrapperEl.append(M(c[l],l))}),G.sort((l,S)=>S-l).forEach(l=>{a.$wrapperEl.prepend(M(c[l],l))}),a.$wrapperEl.children(".swiper-slide").css(m,`${h}px`),T()}function C(e){if(typeof e=="object"&&"length"in e)for(let t=0;t<e.length;t+=1)e[t]&&a.virtual.slides.push(e[t]);else a.virtual.slides.push(e);n(!0)}function O(e){const t=a.activeIndex;let r=t+1,i=1;if(Array.isArray(e)){for(let d=0;d<e.length;d+=1)e[d]&&a.virtual.slides.unshift(e[d]);r=t+e.length,i=e.length}else a.virtual.slides.unshift(e);if(a.params.virtual.cache){const d=a.virtual.cache,v={};Object.keys(d).forEach(o=>{const u=d[o],c=u.attr("data-swiper-slide-index");c&&u.attr("data-swiper-slide-index",parseInt(c,10)+i),v[parseInt(o,10)+i]=u}),a.virtual.cache=v}n(!0),a.slideTo(r,0)}function U(e){if(typeof e>"u"||e===null)return;let t=a.activeIndex;if(Array.isArray(e))for(let r=e.length-1;r>=0;r-=1)a.virtual.slides.splice(e[r],1),a.params.virtual.cache&&delete a.virtual.cache[e[r]],e[r]<t&&(t-=1),t=Math.max(t,0);else a.virtual.slides.splice(e,1),a.params.virtual.cache&&delete a.virtual.cache[e],e<t&&(t-=1),t=Math.max(t,0);n(!0),a.slideTo(t,0)}function j(){a.virtual.slides=[],a.params.virtual.cache&&(a.virtual.cache={}),n(!0),a.slideTo(0,0)}p("beforeInit",()=>{!a.params.virtual.enabled||(a.virtual.slides=a.params.virtual.slides,a.classNames.push(`${a.params.containerModifierClass}virtual`),a.params.watchSlidesProgress=!0,a.originalParams.watchSlidesProgress=!0,a.params.initialSlide||n())}),p("setTranslate",()=>{!a.params.virtual.enabled||(a.params.cssMode&&!a._immediateVirtual?(clearTimeout(b),b=setTimeout(()=>{n()},100)):n())}),p("init update resize",()=>{!a.params.virtual.enabled||a.params.cssMode&&B(a.wrapperEl,"--swiper-virtual-size",`${a.virtualSize}px`)}),Object.assign(a.virtual,{appendSlide:C,prependSlide:O,removeSlide:U,removeAllSlides:j,update:n})}export{R as V};
